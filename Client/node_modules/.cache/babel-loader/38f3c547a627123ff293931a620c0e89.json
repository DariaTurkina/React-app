{"ast":null,"code":"var _jsxFileName = \"/home/user/React-app/Client/src/Components/Authorization.js\";\nimport React from 'react'; //import './Authorization.css';\n\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst axios = require('axios');\n\nconst path = \"http://localhost:1234/users\";\nexport default class Authorization extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"\",\n      pwd: \"\",\n      id: \"\",\n      statusLog: \"in\"\n    };\n\n    this.readEmailInput = e => {\n      const value = e.target.value;\n      this.setState({\n        email: value\n      });\n    };\n\n    this.readPwdInput = e => {\n      const value = e.target.value;\n      this.setState({\n        pwd: value\n      });\n    };\n  }\n\n  componentDidMount() {\n    const usersArray = axios.get(\"\".concat(path));\n    console.log(\"users: \", usersArray);\n  }\n\n  notifyError(err) {\n    toast.error(\"\".concat(err), {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  notifySuccess(text) {\n    toast.success(\"\".concat(text), {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  compareUserData() {\n    let data = axios.get(\"\".concat(path, \"/login\"), {\n      params: {\n        email: this.state.email,\n        pwd: this.state.pwd\n      }\n    });\n    data = data[Promise].data;\n\n    if (data) {\n      console.log(\"currentUser auth >> \", data);\n      this.props.changeStateApp(data);\n    } else {\n      this.notifyError(\"Error, no such user (\".concat(this.state.email, \") exists!\"));\n    }\n  }\n\n  changeStatusLog() {\n    if (this.state.statusLog === \"in\") {\n      this.setState({\n        statusLog: \"up\"\n      });\n    } else {\n      this.setState({\n        statusLog: \"in\"\n      });\n    }\n\n    this.setState({\n      email: \"\"\n    });\n    this.setState({\n      pwd: \"\"\n    });\n  }\n\n  regNewUser() {\n    let user = {\n      email: this.state.email,\n      pwd: this.state.pwd\n    };\n    axios.post(\"\".concat(path, \"/create\"), user).then(() => {\n      this.notifySuccess(\"User \".concat(this.state.email, \" registered successfully\"));\n\n      const _axios$get = axios.get(\"\".concat(path), user),\n            data = _axios$get.data;\n\n      console.log(\"currentUser reg >> \", data);\n      this.props.changeStateApp(data);\n    }).catch(() => {\n      this.notifyError(\"Error, this email (\".concat(this.state.email, \") is already taken!\"));\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Authorization\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"header\", {\n      className: \"Authorization-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.statusLog === \"in\" ? \"Authorization\" : \"Registration\"), React.createElement(\"div\", {\n      className: \"creds\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"email-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"email-p\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Email :\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.email,\n      className: \"email-value\",\n      onChange: e => this.readEmailInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"pwd-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"pwd-p\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Password :\"), React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.pwd,\n      className: \"pwd-value\",\n      onChange: e => this.readPwdInput(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"but-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.state.statusLog === \"in\" && React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Sign in\",\n      className: \"login\",\n      onClick: () => this.compareUserData(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), this.state.statusLog === \"in\" && React.createElement(\"p\", {\n      className: \"offerToReg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"If you don't have an account, register, please.\"), React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"register\",\n      value: \"Register\",\n      onClick: this.state.statusLog === \"in\" ? () => this.changeStatusLog() : () => this.regNewUser(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), this.state.statusLog === \"up\" && React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Cancel\",\n      className: \"cancel\",\n      onClick: () => this.changeStatusLog(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/user/React-app/Client/src/Components/Authorization.js"],"names":["React","toast","ToastContainer","axios","require","path","Authorization","Component","state","email","pwd","id","statusLog","readEmailInput","e","value","target","setState","readPwdInput","componentDidMount","usersArray","get","console","log","notifyError","err","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","notifySuccess","text","success","compareUserData","data","params","Promise","props","changeStateApp","changeStatusLog","regNewUser","user","post","then","catch","render"],"mappings":"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","sourcesContent":["import React from 'react';\n//import './Authorization.css';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst axios = require('axios');\nconst path = \"http://localhost:1234/users\";\n\nexport default class Authorization extends React.Component {\n    state = {\n        email: \"\",\n        pwd: \"\",\n        id: \"\",\n        statusLog: \"in\"\n    }\n\n    componentDidMount() {\n        const usersArray = axios.get(`${path}`);\n        console.log(\"users: \", usersArray)\n    }\n\n    notifyError(err) {\n        toast.error(`${err}`, {\n            position: \"top-center\",\n            autoClose: 2000,\n            hideProgressBar: true,\n            closeOnClick: false,\n            pauseOnHover: true,\n            draggable: true\n        });\n    }\n\n    notifySuccess(text) {\n        toast.success(`${text}`, {\n            position: \"top-center\",\n            autoClose: 2000,\n            hideProgressBar: true,\n            closeOnClick: false,\n            pauseOnHover: true,\n            draggable: true\n        });\n    }\n\n    readEmailInput = (e) => {\n        const { value } = e.target;\n        this.setState({ email: value });\n    }\n\n    readPwdInput = (e) => {\n        const { value } = e.target;\n        this.setState({ pwd: value });\n    }\n\n    compareUserData() {\n        let data = axios.get(`${path}/login`, {\n            params: {\n                email: this.state.email,\n                pwd: this.state.pwd\n            }\n        })\n        data = data[Promise].data\n        if (data) {\n            console.log(\"currentUser auth >> \", data);\n            this.props.changeStateApp(data);\n        } else {\n            this.notifyError(`Error, no such user (${this.state.email}) exists!`);\n        }\n    }\n\n    changeStatusLog() {\n        if (this.state.statusLog === \"in\") {\n            this.setState({ statusLog: \"up\" });\n        } else {\n            this.setState({ statusLog: \"in\" });\n        }\n        this.setState({ email: \"\" });\n        this.setState({ pwd: \"\" });\n    }\n\n    regNewUser() {\n        let user = {\n            email: this.state.email,\n            pwd: this.state.pwd\n        }\n        axios.post(`${path}/create`, user)\n            .then(() => {\n                this.notifySuccess(`User ${this.state.email} registered successfully`);\n                const { data } = axios.get(`${path}`, user);\n                console.log(\"currentUser reg >> \", data);\n                this.props.changeStateApp(data);\n            })\n            .catch(() => {\n                this.notifyError(`Error, this email (${this.state.email}) is already taken!`);\n            })\n    }\n\n    render() {\n        return (\n            <div className=\"Authorization\">\n                <ToastContainer />\n                <header className=\"Authorization-header\">\n                    {this.state.statusLog === \"in\" ? \"Authorization\" : \"Registration\"}\n                </header>\n                <div className=\"creds\">\n                    <div className=\"email-block\">\n                        <p className=\"email-p\">Email :</p>\n                        <input\n                            type=\"text\"\n                            value={this.state.email}\n                            className=\"email-value\"\n                            onChange={(e) => this.readEmailInput(e)}\n                        />\n                    </div>\n                    <div className=\"pwd-block\">\n                        <p className=\"pwd-p\">Password :</p>\n                        <input\n                            type=\"password\"\n                            value={this.state.pwd}\n                            className=\"pwd-value\"\n                            onChange={(e) => this.readPwdInput(e)}\n                        />\n                    </div>\n                    <div className=\"but-block\">\n                        {this.state.statusLog === \"in\" &&\n                            <input\n                                type=\"submit\"\n                                value=\"Sign in\"\n                                className=\"login\"\n                                onClick={() => this.compareUserData()}\n                            />\n                        }\n                        {this.state.statusLog === \"in\" &&\n                            <p className=\"offerToReg\">\n                                If you don't have an account, register, please.\n                            </p>\n                        }\n                        <input\n                            type=\"submit\"\n                            className=\"register\"\n                            value=\"Register\"\n                            onClick={this.state.statusLog === \"in\" ? () => this.changeStatusLog() : () => this.regNewUser()}\n                        />\n                        {this.state.statusLog === \"up\" && <input\n                            type=\"submit\"\n                            value=\"Cancel\"\n                            className=\"cancel\"\n                            onClick={() => this.changeStatusLog()}\n                        />}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}