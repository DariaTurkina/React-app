{"ast":null,"code":"var _jsxFileName = \"/home/user/React-app/Client/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport AddComponent from './Components/AddComponent.js';\nimport { TaskList } from './TaskList.js';\nimport Authorization from './Components/Authorization.js';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst axios = require('axios');\n\nconst path = \"http://localhost:1234/tasks\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      todoes: [],\n      userID: \"\",\n      stateApp: \"Authorization\"\n    };\n  }\n\n  notify(err) {\n    toast.error(\"\".concat(err), {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  componentDidMount() {\n    axios.get(\"\".concat(path)).then(res => {\n      const data = res.data;\n      this.setState({\n        todoes: data\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  changeStateApp(currentUser) {\n    this.setState({\n      stateApp: \"TaskList\",\n      userID: currentUser._id\n    });\n    console.log(\"currentUser >> \", currentUser);\n  }\n\n  addTodo(nameValue) {\n    let newTask = {\n      name: nameValue,\n      status: false,\n      userID: this.state.userID\n    };\n    axios.post(\"\".concat(path, \"/create\"), newTask).then(() => {\n      axios.get(\"\".concat(path)).then(res => {\n        const data = res.data;\n        this.setState({\n          todoes: data\n        });\n      }).catch(err => {\n        this.notify(err);\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  checkTasks() {\n    let count = 0;\n    let bool = true;\n\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      if (this.state.todoes[i].status === false) {\n        count++;\n        break;\n      }\n    }\n\n    if (count === 0) {\n      bool = false;\n    }\n\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      let todo = {\n        name: this.state.todoes[i].name,\n        status: bool,\n        id: this.state.todoes[i]._id\n      };\n      axios.put(\"\".concat(path, \"/\").concat(this.state.todoes[i]._id, \"/update\"), todo).then(() => {\n        this.setState(state => {\n          const todoes = state.todoes.map(e => {\n            e.status = bool;\n            return e.status;\n          });\n          return {\n            status: todoes\n          };\n        });\n      }).catch(err => {\n        this.notify(err);\n      });\n    }\n  }\n\n  checkTask(id, bool) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let todoToUpdate = {\n      name: thisTodo[0].name,\n      status: bool,\n      id: id\n    };\n    axios.put(\"\".concat(path, \"/\").concat(id, \"/update\"), todoToUpdate).then(() => {\n      this.setState(state => {\n        const todoes = state.todoes.map(e => {\n          if (e._id === id) {\n            e.status = bool;\n            return e.status;\n          }\n        });\n        return {\n          status: todoes\n        };\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  deleteTask(id) {\n    const newArray = this.state.todoes.filter(el => el._id !== id);\n    axios.delete(\"\".concat(path, \"/\").concat(id, \"/delete\")).then(() => {\n      this.setState({\n        todoes: newArray\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  changeText(name, id) {\n    this.setState(state => {\n      const updated = state.todoes.map(e => {\n        if (e._id === id) {\n          e.name = name;\n          return e.name;\n        }\n      });\n      return {\n        updated\n      };\n    });\n  }\n\n  changeTaskName(name, id) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let updateData = {\n      name: name,\n      status: thisTodo.status,\n      _id: thisTodo._id,\n      _v: 0\n    };\n    axios.put(\"\".concat(path, \"/\").concat(id, \"/update\"), updateData).then(() => {\n      this.setState(state => {\n        const updated = state.todoes.map(e => {\n          if (e._id === id) {\n            e.name = name;\n            return e.name;\n          }\n        });\n        return {\n          updated\n        };\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  removeAllCompleted(arrayOfCompleted) {\n    if (arrayOfCompleted.length !== 0) {\n      let clearedFromComleted = this.state.todoes.filter(e => e._id !== arrayOfCompleted[0]._id);\n      axios.delete(\"\".concat(path, \"/\").concat(arrayOfCompleted[0]._id, \"/delete\")).then(() => {\n        this.setState({\n          todoes: clearedFromComleted\n        });\n      }).catch(err => {\n        this.notify(err);\n      });\n\n      for (let i = 1; i < arrayOfCompleted.length; i++) {\n        clearedFromComleted = clearedFromComleted.filter(e => e._id !== arrayOfCompleted[i]._id);\n        axios.delete(\"\".concat(path, \"/\").concat(arrayOfCompleted[i]._id, \"/delete\")).then(() => {\n          this.setState({\n            todoes: clearedFromComleted\n          });\n        }).catch(err => {\n          this.notify(err);\n        });\n      }\n    } else {\n      alert(\"Nothing to delete\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App container\",\n      id: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"header\", {\n      className: \"App-header text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"todos\"), this.state.stateApp === \"Authorization\" && React.createElement(Authorization, {\n      changeStateApp: currentUser => this.changeStateApp(currentUser),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), this.state.stateApp === \"TaskList\" && React.createElement(\"div\", {\n      className: \"taskBody shadow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(AddComponent, {\n      addTodo: e => this.addTodo(e),\n      checkTasks: () => this.checkTasks(),\n      array: this.state.todoes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), React.createElement(TaskList, {\n      array: this.state.todoes,\n      checkTask: (id, bool) => this.checkTask(id, bool),\n      changeTaskName: (name, id) => this.changeTaskName(name, id),\n      changeText: (name, id) => this.changeText(name, id),\n      deleteTask: id => this.deleteTask(id),\n      removeAllCompleted: arrayOfCompleted => this.removeAllCompleted(arrayOfCompleted),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/user/React-app/Client/src/App.js"],"names":["React","AddComponent","TaskList","Authorization","toast","ToastContainer","axios","require","path","App","Component","constructor","state","todoes","userID","stateApp","notify","err","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","componentDidMount","get","then","res","data","setState","catch","changeStateApp","currentUser","_id","console","log","addTodo","nameValue","newTask","name","status","post","checkTasks","count","bool","i","length","todo","id","put","map","e","checkTask","thisTodo","filter","todoToUpdate","deleteTask","newArray","el","delete","changeText","updated","changeTaskName","updateData","_v","removeAllCompleted","arrayOfCompleted","clearedFromComleted","alert","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport AddComponent from './Components/AddComponent.js'\nimport { TaskList } from './TaskList.js'\nimport Authorization from './Components/Authorization.js'\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst axios = require('axios');\nconst path = \"http://localhost:1234/tasks\";\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      todoes: [],\n      userID: \"\",\n      stateApp: \"Authorization\"\n    }\n  }\n\n  notify(err) {\n    toast.error(`${err}`, {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  componentDidMount() {\n    axios.get(`${path}`)\n      .then(res => {\n        const data = res.data;\n        this.setState({ todoes: data });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  changeStateApp(currentUser) {\n    this.setState({\n      stateApp: \"TaskList\",\n      userID: currentUser._id\n    });\n    console.log(\"currentUser >> \", currentUser)\n  }\n\n  addTodo(nameValue) {\n\n    let newTask = {\n      name: nameValue,\n      status: false,\n      userID: this.state.userID\n    }\n    axios.post(`${path}/create`, newTask)\n      .then(() => {\n        axios.get(`${path}`)\n          .then(res => {\n            const data = res.data;\n            this.setState({ todoes: data });\n          })\n          .catch(err => {\n            this.notify(err);\n          })\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  checkTasks() {\n    let count = 0;\n    let bool = true;\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      if (this.state.todoes[i].status === false) {\n        count++;\n        break;\n      }\n    }\n\n    if (count === 0) {\n      bool = false;\n    }\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      let todo = {\n        name: this.state.todoes[i].name,\n        status: bool,\n        id: this.state.todoes[i]._id\n      }\n      axios.put(`${path}/${this.state.todoes[i]._id}/update`, todo)\n        .then(() => {\n          this.setState(state => {\n            const todoes = state.todoes.map(e => {\n              e.status = bool;\n              return e.status;\n            });\n            return { status: todoes };\n          });\n        })\n        .catch(err => {\n          this.notify(err);\n        })\n    }\n  }\n\n  checkTask(id, bool) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let todoToUpdate = {\n      name: thisTodo[0].name,\n      status: bool,\n      id: id\n    }\n    axios.put(`${path}/${id}/update`, todoToUpdate)\n      .then(() => {\n        this.setState(state => {\n          const todoes = state.todoes.map(e => {\n            if (e._id === id) {\n              e.status = bool;\n              return e.status;\n            }\n          });\n          return { status: todoes };\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  deleteTask(id) {\n    const newArray = this.state.todoes.filter(el => (el._id !== id));\n    axios.delete(`${path}/${id}/delete`)\n      .then(() => {\n        this.setState({\n          todoes: newArray\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  changeText(name, id) {\n    this.setState(state => {\n      const updated = state.todoes.map(e => {\n        if (e._id === id) {\n          e.name = name;\n          return e.name;\n        }\n      });\n      return { updated, };\n    });\n  }\n\n  changeTaskName(name, id) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let updateData = {\n      name: name,\n      status: thisTodo.status,\n      _id: thisTodo._id,\n      _v: 0\n    }\n    axios.put(`${path}/${id}/update`, updateData)\n      .then(() => {\n        this.setState(state => {\n          const updated = state.todoes.map(e => {\n            if (e._id === id) {\n              e.name = name;\n              return e.name;\n            }\n          });\n          return { updated, };\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  removeAllCompleted(arrayOfCompleted) {\n    if (arrayOfCompleted.length !== 0) {\n\n      let clearedFromComleted = this.state.todoes.filter(e => e._id !== arrayOfCompleted[0]._id);\n      axios.delete(`${path}/${arrayOfCompleted[0]._id}/delete`)\n        .then(() => {\n          this.setState({\n            todoes: clearedFromComleted\n          });\n        })\n        .catch(err => {\n          this.notify(err);\n        })\n      for (let i = 1; i < arrayOfCompleted.length; i++) {\n        clearedFromComleted = clearedFromComleted.filter(e => e._id !== arrayOfCompleted[i]._id);\n        axios.delete(`${path}/${arrayOfCompleted[i]._id}/delete`)\n          .then(() => {\n            this.setState({\n              todoes: clearedFromComleted\n            });\n          })\n          .catch(err => {\n            this.notify(err);\n          })\n      }\n    } else {\n      alert(\"Nothing to delete\");\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App container\" id=\"app\">\n        <ToastContainer />\n        <header className=\"App-header text-center\">todos</header>\n        {this.state.stateApp === \"Authorization\" &&\n          <Authorization\n            changeStateApp={(currentUser) => this.changeStateApp(currentUser)}\n          />\n        }\n        {this.state.stateApp === \"TaskList\" &&\n          <div className=\"taskBody shadow\">\n            <AddComponent\n              addTodo={(e) => this.addTodo(e)}\n              checkTasks={() => this.checkTasks()}\n              array={this.state.todoes}\n            />\n            <TaskList\n              array={this.state.todoes}\n              checkTask={(id, bool) => this.checkTask(id, bool)}\n              changeTaskName={(name, id) => this.changeTaskName(name, id)}\n              changeText={(name, id) => this.changeText(name, id)}\n              deleteTask={(id) => this.deleteTask(id)}\n              removeAllCompleted={(arrayOfCompleted) => this.removeAllCompleted(arrayOfCompleted)}\n            />\n          </div>\n        }\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}