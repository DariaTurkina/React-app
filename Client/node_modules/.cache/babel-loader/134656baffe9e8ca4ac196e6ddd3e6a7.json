{"ast":null,"code":"var _jsxFileName = \"/home/user/React-app/Client/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport AddComponent from './Components/AddComponent.js';\nimport { TaskList } from './TaskList.js';\nimport Authorization from './Components/Authorization.js';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst axios = require('axios');\n\nconst path = \"http://localhost:1234/todos\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      todoes: [],\n      userID: \"\",\n      stateApp: \"Authorization\"\n    };\n  }\n\n  notify(err) {\n    toast.error(\"\".concat(err), {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n  /*  componentDidMount() {\n     axios.get(`${path}`)\n       .then(res => {\n         const data = res.data;\n         this.setState({ todoes: data });\n       })\n       .catch(err => {\n         this.notify(err);\n       })\n   } */\n\n\n  changeStateApp(currentUser) {\n    axios.get(\"\".concat(path), {\n      params: {\n        userID: currentUser\n      }\n    }).then(res => {\n      const data = res.data;\n      console.log(\"res *** \", data, currentUser);\n      this.setState({\n        todoes: data,\n        stateApp: \"TaskList\",\n        userID: currentUser\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n    console.log(\"STATE : \");\n  }\n\n  addTodo(nameValue) {\n    let newTask = {\n      name: nameValue,\n      status: false,\n      userID: this.state.userID\n    };\n    axios.post(\"\".concat(path, \"/create\"), newTask).then(() => {\n      axios.get(\"\".concat(path)).then(res => {\n        const data = res.data;\n        this.setState({\n          todoes: data\n        });\n      }).catch(err => {\n        this.notify(err);\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  checkTasks() {\n    let count = 0;\n    let bool = true;\n\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      if (this.state.todoes[i].status === false) {\n        count++;\n        break;\n      }\n    }\n\n    if (count === 0) {\n      bool = false;\n    }\n\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      let todo = {\n        name: this.state.todoes[i].name,\n        status: bool,\n        id: this.state.todoes[i]._id\n      };\n      axios.put(\"\".concat(path, \"/\").concat(this.state.todoes[i]._id, \"/update\"), todo).then(() => {\n        this.setState(state => {\n          const todoes = state.todoes.map(e => {\n            e.status = bool;\n            return e.status;\n          });\n          return {\n            status: todoes\n          };\n        });\n      }).catch(err => {\n        this.notify(err);\n      });\n    }\n  }\n\n  checkTask(id, bool) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let todoToUpdate = {\n      name: thisTodo[0].name,\n      status: bool,\n      id: id\n    };\n    axios.put(\"\".concat(path, \"/\").concat(id, \"/update\"), todoToUpdate).then(() => {\n      this.setState(state => {\n        const todoes = state.todoes.map(e => {\n          if (e._id === id) {\n            e.status = bool;\n            return e.status;\n          }\n        });\n        return {\n          status: todoes\n        };\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  deleteTask(id) {\n    const newArray = this.state.todoes.filter(el => el._id !== id);\n    axios.delete(\"\".concat(path, \"/\").concat(id, \"/delete\")).then(() => {\n      this.setState({\n        todoes: newArray\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  changeText(name, id) {\n    this.setState(state => {\n      const updated = state.todoes.map(e => {\n        if (e._id === id) {\n          e.name = name;\n          return e.name;\n        }\n      });\n      return {\n        updated\n      };\n    });\n  }\n\n  changeTaskName(name, id) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let updateData = {\n      name: name,\n      status: thisTodo.status,\n      _id: thisTodo._id,\n      _v: 0\n    };\n    axios.put(\"\".concat(path, \"/\").concat(id, \"/update\"), updateData).then(() => {\n      this.setState(state => {\n        const updated = state.todoes.map(e => {\n          if (e._id === id) {\n            e.name = name;\n            return e.name;\n          }\n        });\n        return {\n          updated\n        };\n      });\n    }).catch(err => {\n      this.notify(err);\n    });\n  }\n\n  removeAllCompleted(arrayOfCompleted) {\n    if (arrayOfCompleted.length !== 0) {\n      let clearedFromComleted = this.state.todoes.filter(e => e._id !== arrayOfCompleted[0]._id);\n      axios.delete(\"\".concat(path, \"/\").concat(arrayOfCompleted[0]._id, \"/delete\")).then(() => {\n        this.setState({\n          todoes: clearedFromComleted\n        });\n      }).catch(err => {\n        this.notify(err);\n      });\n\n      for (let i = 1; i < arrayOfCompleted.length; i++) {\n        clearedFromComleted = clearedFromComleted.filter(e => e._id !== arrayOfCompleted[i]._id);\n        axios.delete(\"\".concat(path, \"/\").concat(arrayOfCompleted[i]._id, \"/delete\")).then(() => {\n          this.setState({\n            todoes: clearedFromComleted\n          });\n        }).catch(err => {\n          this.notify(err);\n        });\n      }\n    } else {\n      alert(\"Nothing to delete\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App container\",\n      id: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), React.createElement(\"header\", {\n      className: \"App-header text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"todos\"), this.state.stateApp === \"Authorization\" && React.createElement(Authorization, {\n      changeStateApp: currentUser => this.changeStateApp(currentUser),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), this.state.stateApp === \"TaskList\" && React.createElement(\"div\", {\n      className: \"taskBody shadow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(AddComponent, {\n      addTodo: e => this.addTodo(e),\n      checkTasks: () => this.checkTasks(),\n      array: this.state.todoes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), React.createElement(TaskList, {\n      array: this.state.todoes,\n      checkTask: (id, bool) => this.checkTask(id, bool),\n      changeTaskName: (name, id) => this.changeTaskName(name, id),\n      changeText: (name, id) => this.changeText(name, id),\n      deleteTask: id => this.deleteTask(id),\n      removeAllCompleted: arrayOfCompleted => this.removeAllCompleted(arrayOfCompleted),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/user/React-app/Client/src/App.js"],"names":["React","AddComponent","TaskList","Authorization","toast","ToastContainer","axios","require","path","App","Component","constructor","state","todoes","userID","stateApp","notify","err","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","changeStateApp","currentUser","get","params","then","res","data","console","log","setState","catch","addTodo","nameValue","newTask","name","status","post","checkTasks","count","bool","i","length","todo","id","_id","put","map","e","checkTask","thisTodo","filter","todoToUpdate","deleteTask","newArray","el","delete","changeText","updated","changeTaskName","updateData","_v","removeAllCompleted","arrayOfCompleted","clearedFromComleted","alert","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,OAAOC,aAAP,MAA0B,+BAA1B;AACA,SAASC,KAAT,EAAgBC,cAAhB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,IAAI,GAAG,6BAAb;;AAEA,MAAMC,GAAN,SAAkBT,KAAK,CAACU,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,EADG;AAEXC,MAAAA,MAAM,EAAE,EAFG;AAGXC,MAAAA,QAAQ,EAAE;AAHC,KAAb;AAKD;;AAEDC,EAAAA,MAAM,CAACC,GAAD,EAAM;AACVb,IAAAA,KAAK,CAACc,KAAN,WAAeD,GAAf,GAAsB;AACpBE,MAAAA,QAAQ,EAAE,YADU;AAEpBC,MAAAA,SAAS,EAAE,IAFS;AAGpBC,MAAAA,eAAe,EAAE,IAHG;AAIpBC,MAAAA,YAAY,EAAE,KAJM;AAKpBC,MAAAA,YAAY,EAAE,IALM;AAMpBC,MAAAA,SAAS,EAAE;AANS,KAAtB;AAQD;AAED;;;;;;;;;;;;AAWAC,EAAAA,cAAc,CAACC,WAAD,EAAc;AAC1BpB,IAAAA,KAAK,CAACqB,GAAN,WAAanB,IAAb,GAAqB;AAAEoB,MAAAA,MAAM,EAAE;AAAEd,QAAAA,MAAM,EAAEY;AAAV;AAAV,KAArB,EACGG,IADH,CACQC,GAAG,IAAI;AAAA,YACHC,IADG,GACMD,GADN,CACHC,IADG;AAEXC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,IAAxB,EAA8BL,WAA9B;AACA,WAAKQ,QAAL,CAAc;AACZrB,QAAAA,MAAM,EAAEkB,IADI;AAEZhB,QAAAA,QAAQ,EAAE,UAFE;AAGZD,QAAAA,MAAM,EAAEY;AAHI,OAAd;AAKD,KATH,EAUGS,KAVH,CAUSlB,GAAG,IAAI;AACZ,WAAKD,MAAL,CAAYC,GAAZ;AACD,KAZH;AAaAe,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACD;;AAEDG,EAAAA,OAAO,CAACC,SAAD,EAAY;AAEjB,QAAIC,OAAO,GAAG;AACZC,MAAAA,IAAI,EAAEF,SADM;AAEZG,MAAAA,MAAM,EAAE,KAFI;AAGZ1B,MAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWE;AAHP,KAAd;AAKAR,IAAAA,KAAK,CAACmC,IAAN,WAAcjC,IAAd,cAA6B8B,OAA7B,EACGT,IADH,CACQ,MAAM;AACVvB,MAAAA,KAAK,CAACqB,GAAN,WAAanB,IAAb,GACGqB,IADH,CACQC,GAAG,IAAI;AACX,cAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;AACA,aAAKG,QAAL,CAAc;AAAErB,UAAAA,MAAM,EAAEkB;AAAV,SAAd;AACD,OAJH,EAKGI,KALH,CAKSlB,GAAG,IAAI;AACZ,aAAKD,MAAL,CAAYC,GAAZ;AACD,OAPH;AAQD,KAVH,EAWGkB,KAXH,CAWSlB,GAAG,IAAI;AACZ,WAAKD,MAAL,CAAYC,GAAZ;AACD,KAbH;AAcD;;AAEDyB,EAAAA,UAAU,GAAG;AACX,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,IAAI,GAAG,IAAX;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjC,KAAL,CAAWC,MAAX,CAAkBiC,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjD,UAAI,KAAKjC,KAAL,CAAWC,MAAX,CAAkBgC,CAAlB,EAAqBL,MAArB,KAAgC,KAApC,EAA2C;AACzCG,QAAAA,KAAK;AACL;AACD;AACF;;AAED,QAAIA,KAAK,KAAK,CAAd,EAAiB;AACfC,MAAAA,IAAI,GAAG,KAAP;AACD;;AACD,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjC,KAAL,CAAWC,MAAX,CAAkBiC,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjD,UAAIE,IAAI,GAAG;AACTR,QAAAA,IAAI,EAAE,KAAK3B,KAAL,CAAWC,MAAX,CAAkBgC,CAAlB,EAAqBN,IADlB;AAETC,QAAAA,MAAM,EAAEI,IAFC;AAGTI,QAAAA,EAAE,EAAE,KAAKpC,KAAL,CAAWC,MAAX,CAAkBgC,CAAlB,EAAqBI;AAHhB,OAAX;AAKA3C,MAAAA,KAAK,CAAC4C,GAAN,WAAa1C,IAAb,cAAqB,KAAKI,KAAL,CAAWC,MAAX,CAAkBgC,CAAlB,EAAqBI,GAA1C,cAAwDF,IAAxD,EACGlB,IADH,CACQ,MAAM;AACV,aAAKK,QAAL,CAActB,KAAK,IAAI;AACrB,gBAAMC,MAAM,GAAGD,KAAK,CAACC,MAAN,CAAasC,GAAb,CAAiBC,CAAC,IAAI;AACnCA,YAAAA,CAAC,CAACZ,MAAF,GAAWI,IAAX;AACA,mBAAOQ,CAAC,CAACZ,MAAT;AACD,WAHc,CAAf;AAIA,iBAAO;AAAEA,YAAAA,MAAM,EAAE3B;AAAV,WAAP;AACD,SAND;AAOD,OATH,EAUGsB,KAVH,CAUSlB,GAAG,IAAI;AACZ,aAAKD,MAAL,CAAYC,GAAZ;AACD,OAZH;AAaD;AACF;;AAEDoC,EAAAA,SAAS,CAACL,EAAD,EAAKJ,IAAL,EAAW;AAClB,QAAIU,QAAQ,GAAG,KAAK1C,KAAL,CAAWC,MAAX,CAAkB0C,MAAlB,CAAyBH,CAAC,IAAIA,CAAC,CAACH,GAAF,KAAUD,EAAxC,CAAf;AACA,QAAIQ,YAAY,GAAG;AACjBjB,MAAAA,IAAI,EAAEe,QAAQ,CAAC,CAAD,CAAR,CAAYf,IADD;AAEjBC,MAAAA,MAAM,EAAEI,IAFS;AAGjBI,MAAAA,EAAE,EAAEA;AAHa,KAAnB;AAKA1C,IAAAA,KAAK,CAAC4C,GAAN,WAAa1C,IAAb,cAAqBwC,EAArB,cAAkCQ,YAAlC,EACG3B,IADH,CACQ,MAAM;AACV,WAAKK,QAAL,CAActB,KAAK,IAAI;AACrB,cAAMC,MAAM,GAAGD,KAAK,CAACC,MAAN,CAAasC,GAAb,CAAiBC,CAAC,IAAI;AACnC,cAAIA,CAAC,CAACH,GAAF,KAAUD,EAAd,EAAkB;AAChBI,YAAAA,CAAC,CAACZ,MAAF,GAAWI,IAAX;AACA,mBAAOQ,CAAC,CAACZ,MAAT;AACD;AACF,SALc,CAAf;AAMA,eAAO;AAAEA,UAAAA,MAAM,EAAE3B;AAAV,SAAP;AACD,OARD;AASD,KAXH,EAYGsB,KAZH,CAYSlB,GAAG,IAAI;AACZ,WAAKD,MAAL,CAAYC,GAAZ;AACD,KAdH;AAeD;;AAEDwC,EAAAA,UAAU,CAACT,EAAD,EAAK;AACb,UAAMU,QAAQ,GAAG,KAAK9C,KAAL,CAAWC,MAAX,CAAkB0C,MAAlB,CAAyBI,EAAE,IAAKA,EAAE,CAACV,GAAH,KAAWD,EAA3C,CAAjB;AACA1C,IAAAA,KAAK,CAACsD,MAAN,WAAgBpD,IAAhB,cAAwBwC,EAAxB,cACGnB,IADH,CACQ,MAAM;AACV,WAAKK,QAAL,CAAc;AACZrB,QAAAA,MAAM,EAAE6C;AADI,OAAd;AAGD,KALH,EAMGvB,KANH,CAMSlB,GAAG,IAAI;AACZ,WAAKD,MAAL,CAAYC,GAAZ;AACD,KARH;AASD;;AAED4C,EAAAA,UAAU,CAACtB,IAAD,EAAOS,EAAP,EAAW;AACnB,SAAKd,QAAL,CAActB,KAAK,IAAI;AACrB,YAAMkD,OAAO,GAAGlD,KAAK,CAACC,MAAN,CAAasC,GAAb,CAAiBC,CAAC,IAAI;AACpC,YAAIA,CAAC,CAACH,GAAF,KAAUD,EAAd,EAAkB;AAChBI,UAAAA,CAAC,CAACb,IAAF,GAASA,IAAT;AACA,iBAAOa,CAAC,CAACb,IAAT;AACD;AACF,OALe,CAAhB;AAMA,aAAO;AAAEuB,QAAAA;AAAF,OAAP;AACD,KARD;AASD;;AAEDC,EAAAA,cAAc,CAACxB,IAAD,EAAOS,EAAP,EAAW;AACvB,QAAIM,QAAQ,GAAG,KAAK1C,KAAL,CAAWC,MAAX,CAAkB0C,MAAlB,CAAyBH,CAAC,IAAIA,CAAC,CAACH,GAAF,KAAUD,EAAxC,CAAf;AACA,QAAIgB,UAAU,GAAG;AACfzB,MAAAA,IAAI,EAAEA,IADS;AAEfC,MAAAA,MAAM,EAAEc,QAAQ,CAACd,MAFF;AAGfS,MAAAA,GAAG,EAAEK,QAAQ,CAACL,GAHC;AAIfgB,MAAAA,EAAE,EAAE;AAJW,KAAjB;AAMA3D,IAAAA,KAAK,CAAC4C,GAAN,WAAa1C,IAAb,cAAqBwC,EAArB,cAAkCgB,UAAlC,EACGnC,IADH,CACQ,MAAM;AACV,WAAKK,QAAL,CAActB,KAAK,IAAI;AACrB,cAAMkD,OAAO,GAAGlD,KAAK,CAACC,MAAN,CAAasC,GAAb,CAAiBC,CAAC,IAAI;AACpC,cAAIA,CAAC,CAACH,GAAF,KAAUD,EAAd,EAAkB;AAChBI,YAAAA,CAAC,CAACb,IAAF,GAASA,IAAT;AACA,mBAAOa,CAAC,CAACb,IAAT;AACD;AACF,SALe,CAAhB;AAMA,eAAO;AAAEuB,UAAAA;AAAF,SAAP;AACD,OARD;AASD,KAXH,EAYG3B,KAZH,CAYSlB,GAAG,IAAI;AACZ,WAAKD,MAAL,CAAYC,GAAZ;AACD,KAdH;AAeD;;AAEDiD,EAAAA,kBAAkB,CAACC,gBAAD,EAAmB;AACnC,QAAIA,gBAAgB,CAACrB,MAAjB,KAA4B,CAAhC,EAAmC;AAEjC,UAAIsB,mBAAmB,GAAG,KAAKxD,KAAL,CAAWC,MAAX,CAAkB0C,MAAlB,CAAyBH,CAAC,IAAIA,CAAC,CAACH,GAAF,KAAUkB,gBAAgB,CAAC,CAAD,CAAhB,CAAoBlB,GAA5D,CAA1B;AACA3C,MAAAA,KAAK,CAACsD,MAAN,WAAgBpD,IAAhB,cAAwB2D,gBAAgB,CAAC,CAAD,CAAhB,CAAoBlB,GAA5C,cACGpB,IADH,CACQ,MAAM;AACV,aAAKK,QAAL,CAAc;AACZrB,UAAAA,MAAM,EAAEuD;AADI,SAAd;AAGD,OALH,EAMGjC,KANH,CAMSlB,GAAG,IAAI;AACZ,aAAKD,MAAL,CAAYC,GAAZ;AACD,OARH;;AASA,WAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsB,gBAAgB,CAACrB,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChDuB,QAAAA,mBAAmB,GAAGA,mBAAmB,CAACb,MAApB,CAA2BH,CAAC,IAAIA,CAAC,CAACH,GAAF,KAAUkB,gBAAgB,CAACtB,CAAD,CAAhB,CAAoBI,GAA9D,CAAtB;AACA3C,QAAAA,KAAK,CAACsD,MAAN,WAAgBpD,IAAhB,cAAwB2D,gBAAgB,CAACtB,CAAD,CAAhB,CAAoBI,GAA5C,cACGpB,IADH,CACQ,MAAM;AACV,eAAKK,QAAL,CAAc;AACZrB,YAAAA,MAAM,EAAEuD;AADI,WAAd;AAGD,SALH,EAMGjC,KANH,CAMSlB,GAAG,IAAI;AACZ,eAAKD,MAAL,CAAYC,GAAZ;AACD,SARH;AASD;AACF,KAxBD,MAwBO;AACLoD,MAAAA,KAAK,CAAC,mBAAD,CAAL;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,EAAE,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAQ,MAAA,SAAS,EAAC,wBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAGG,KAAK1D,KAAL,CAAWG,QAAX,KAAwB,eAAxB,IACC,oBAAC,aAAD;AACE,MAAA,cAAc,EAAGW,WAAD,IAAiB,KAAKD,cAAL,CAAoBC,WAApB,CADnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EAQG,KAAKd,KAAL,CAAWG,QAAX,KAAwB,UAAxB,IACC;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AACE,MAAA,OAAO,EAAGqC,CAAD,IAAO,KAAKhB,OAAL,CAAagB,CAAb,CADlB;AAEE,MAAA,UAAU,EAAE,MAAM,KAAKV,UAAL,EAFpB;AAGE,MAAA,KAAK,EAAE,KAAK9B,KAAL,CAAWC,MAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAME,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,MADpB;AAEE,MAAA,SAAS,EAAE,CAACmC,EAAD,EAAKJ,IAAL,KAAc,KAAKS,SAAL,CAAeL,EAAf,EAAmBJ,IAAnB,CAF3B;AAGE,MAAA,cAAc,EAAE,CAACL,IAAD,EAAOS,EAAP,KAAc,KAAKe,cAAL,CAAoBxB,IAApB,EAA0BS,EAA1B,CAHhC;AAIE,MAAA,UAAU,EAAE,CAACT,IAAD,EAAOS,EAAP,KAAc,KAAKa,UAAL,CAAgBtB,IAAhB,EAAsBS,EAAtB,CAJ5B;AAKE,MAAA,UAAU,EAAGA,EAAD,IAAQ,KAAKS,UAAL,CAAgBT,EAAhB,CALtB;AAME,MAAA,kBAAkB,EAAGmB,gBAAD,IAAsB,KAAKD,kBAAL,CAAwBC,gBAAxB,CAN5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CATJ,CADF;AA4BD;;AAhP+B;;AAkPlC,eAAe1D,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport AddComponent from './Components/AddComponent.js'\nimport { TaskList } from './TaskList.js'\nimport Authorization from './Components/Authorization.js'\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst axios = require('axios');\nconst path = \"http://localhost:1234/todos\";\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      todoes: [],\n      userID: \"\",\n      stateApp: \"Authorization\"\n    }\n  }\n\n  notify(err) {\n    toast.error(`${err}`, {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  /*  componentDidMount() {\n     axios.get(`${path}`)\n       .then(res => {\n         const data = res.data;\n         this.setState({ todoes: data });\n       })\n       .catch(err => {\n         this.notify(err);\n       })\n   } */\n\n  changeStateApp(currentUser) {\n    axios.get(`${path}`, { params: { userID: currentUser } })\n      .then(res => {\n        const { data } = res;\n        console.log(\"res *** \", data, currentUser)\n        this.setState({\n          todoes: data,\n          stateApp: \"TaskList\",\n          userID: currentUser\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n    console.log(\"STATE : \")\n  }\n\n  addTodo(nameValue) {\n\n    let newTask = {\n      name: nameValue,\n      status: false,\n      userID: this.state.userID\n    }\n    axios.post(`${path}/create`, newTask)\n      .then(() => {\n        axios.get(`${path}`)\n          .then(res => {\n            const data = res.data;\n            this.setState({ todoes: data });\n          })\n          .catch(err => {\n            this.notify(err);\n          })\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  checkTasks() {\n    let count = 0;\n    let bool = true;\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      if (this.state.todoes[i].status === false) {\n        count++;\n        break;\n      }\n    }\n\n    if (count === 0) {\n      bool = false;\n    }\n    for (let i = 0; i < this.state.todoes.length; i++) {\n      let todo = {\n        name: this.state.todoes[i].name,\n        status: bool,\n        id: this.state.todoes[i]._id\n      }\n      axios.put(`${path}/${this.state.todoes[i]._id}/update`, todo)\n        .then(() => {\n          this.setState(state => {\n            const todoes = state.todoes.map(e => {\n              e.status = bool;\n              return e.status;\n            });\n            return { status: todoes };\n          });\n        })\n        .catch(err => {\n          this.notify(err);\n        })\n    }\n  }\n\n  checkTask(id, bool) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let todoToUpdate = {\n      name: thisTodo[0].name,\n      status: bool,\n      id: id\n    }\n    axios.put(`${path}/${id}/update`, todoToUpdate)\n      .then(() => {\n        this.setState(state => {\n          const todoes = state.todoes.map(e => {\n            if (e._id === id) {\n              e.status = bool;\n              return e.status;\n            }\n          });\n          return { status: todoes };\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  deleteTask(id) {\n    const newArray = this.state.todoes.filter(el => (el._id !== id));\n    axios.delete(`${path}/${id}/delete`)\n      .then(() => {\n        this.setState({\n          todoes: newArray\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  changeText(name, id) {\n    this.setState(state => {\n      const updated = state.todoes.map(e => {\n        if (e._id === id) {\n          e.name = name;\n          return e.name;\n        }\n      });\n      return { updated, };\n    });\n  }\n\n  changeTaskName(name, id) {\n    let thisTodo = this.state.todoes.filter(e => e._id === id);\n    let updateData = {\n      name: name,\n      status: thisTodo.status,\n      _id: thisTodo._id,\n      _v: 0\n    }\n    axios.put(`${path}/${id}/update`, updateData)\n      .then(() => {\n        this.setState(state => {\n          const updated = state.todoes.map(e => {\n            if (e._id === id) {\n              e.name = name;\n              return e.name;\n            }\n          });\n          return { updated, };\n        });\n      })\n      .catch(err => {\n        this.notify(err);\n      })\n  }\n\n  removeAllCompleted(arrayOfCompleted) {\n    if (arrayOfCompleted.length !== 0) {\n\n      let clearedFromComleted = this.state.todoes.filter(e => e._id !== arrayOfCompleted[0]._id);\n      axios.delete(`${path}/${arrayOfCompleted[0]._id}/delete`)\n        .then(() => {\n          this.setState({\n            todoes: clearedFromComleted\n          });\n        })\n        .catch(err => {\n          this.notify(err);\n        })\n      for (let i = 1; i < arrayOfCompleted.length; i++) {\n        clearedFromComleted = clearedFromComleted.filter(e => e._id !== arrayOfCompleted[i]._id);\n        axios.delete(`${path}/${arrayOfCompleted[i]._id}/delete`)\n          .then(() => {\n            this.setState({\n              todoes: clearedFromComleted\n            });\n          })\n          .catch(err => {\n            this.notify(err);\n          })\n      }\n    } else {\n      alert(\"Nothing to delete\");\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App container\" id=\"app\">\n        <ToastContainer />\n        <header className=\"App-header text-center\">todos</header>\n        {this.state.stateApp === \"Authorization\" &&\n          <Authorization\n            changeStateApp={(currentUser) => this.changeStateApp(currentUser)}\n          />\n        }\n        {this.state.stateApp === \"TaskList\" &&\n          <div className=\"taskBody shadow\">\n            <AddComponent\n              addTodo={(e) => this.addTodo(e)}\n              checkTasks={() => this.checkTasks()}\n              array={this.state.todoes}\n            />\n            <TaskList\n              array={this.state.todoes}\n              checkTask={(id, bool) => this.checkTask(id, bool)}\n              changeTaskName={(name, id) => this.changeTaskName(name, id)}\n              changeText={(name, id) => this.changeText(name, id)}\n              deleteTask={(id) => this.deleteTask(id)}\n              removeAllCompleted={(arrayOfCompleted) => this.removeAllCompleted(arrayOfCompleted)}\n            />\n          </div>\n        }\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}